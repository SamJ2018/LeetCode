## 3.1 总线的基本概念

##### 总线

总线是连接各个部件的信息传输线，是各个部件共享的传输介质。

##### 总线上信息的传送（需要进一步查阅串行的资料）

- 串行
  - 异步传输
  - 同步传输
  - 等时传输
- 并行
  - 需要多条
  - 通常运用在距离短

知乎上一些观点：

并行线路的并行传输无法用于长距离通信，线路成本高。（就是很宽的一根线，如PATA接口）

信号线之间的干扰大，不能用于长距离传输。

在并行传输中，如果传输频率高的化，数据线之间会产生很大的干扰。

刚开始并口是比串口快，但随着技术的发展，当频率提高上限时，现在看到的串口比并口快。

现在主流的方式，远距离使用串行传输，单板内或板间使用并行传输。

##### 单总线结构的计算机举例

##### 解释其弊端

会导致CPU运算过慢

改进后设计出新的结构

##### 面向CPU的双总线结构

##### 解释其弊端



改进后设计出新的结构

##### 以存储器为中心的双总线结构



## 总线的分类

##### 片内总线

芯片内部的总线

##### 系统总线

计算机各个部件之间的信息传输线

- 数据总线 双向 与机器字长、存储字长有关
- 地址总线 单向 与存储地址、I/O地址有关
- 控制总线 有出 有入

##### 通信总线

用于计算机系统之间或计算机系统与其他系统之间的通信

传输方式：

- 串行通信总线
- 并行通信总线

## 总线特性及性能指标

##### 总线物理实现

视频图示。

##### 总线特性

- 机器特性
  - 尺寸
  - 形状
  - 管脚数
  - 排列顺序
- 电气特性
  - 传输方向
  - 有效电平范围
- 功能特性
  - 地址
  - 数据
  - 控制
- 时间特性
  - 信号的时许关系

##### 总线的性能指标

- 总线宽度    数据线的根数（同时传输的数据的位数）
- 标准传输率    每秒传输的最大字节数（MBps）
- 时钟同步/异步    同步、不同步
- 总线复用    地址线与数据线复用（例子：8086）【目的：减少芯片管脚数】
- 信号线数    地址线、数据线和控制线的总和
- 总线控制方式    突发、自动、仲裁、逻辑、计数
- 负载能力

## 总线标准

##### 原因；

##### 介绍部分总线标准

从数据线、时钟、带宽方面比较。

## 总线结构

##### 单总线结构

##### 多总线结构

- 双总线结构
- 三总线结构
  - 局部总线
  - 系统总线
  - 扩展总线
- 四总线结构
  - 局部总线
  - 系统总线
  - 高速总线
  - 扩展总线

##### 举例：

- 传统微信机总线结构
- VL-BUS局部总线结构
- PCI总线
- 多层PCI总线结构

通道：具有特殊功能的处理器，由通道对I/O统一管理。

cache:对主存数据进行缓存

## 总线控制

#### 总线判优控制

- 基本概念
  - 主设备（模块）： 对总线有控制权
  - 从设备（模块）：响应从主设备发来的总线命令

总线判优控制的方法：

- 集中式 
  - 链式查询
  - 计数器定时查询
  - 独立请求方式
- 分布式

##### 链式查询方式

见视频图。

优点：结构简单、优先级算法简单

##### 计数器定时查询方式

优点：优先级确定十分灵活、

##### 独立请求方式

优点：

#### 总线通信控制

##### 目的

解决通信双方协调配合的问题

##### 总线传输周期

- 申请分配阶段  主模块申请，总线仲裁决定  
- 寻址阶段    主模块向从模块给出地址和命令
- 传数阶段    主模块和从模块交换信息
- 结束阶段    主模块撤消相关信息

##### 总线通信的四种方式

- 同步通信    由统一时标控制数据传送     
  - 同步式数据输入    (要求总线长度较短)

- 异步通信    采用应答方式，没有公共时钟标准

- 半同步通信    同步、异步结合

同步特征：

发送方用系统时钟前沿发信号

接收方用系统时钟后沿判断、识别

异步特征：

运行不同速度的模块和谐工作

增加一条“等待”响应信号

- 分离式通信    充分挖掘系统总线每个瞬间
  - 特点：
    - 各个模块有权申请占用总线
    - 采用同步方式通信，不等对方回答
    - 各个模块准备数据时，不占用总线
    - 总线被占用时，无空闲

##### 同步、异步、半同步的共同点：

- 主模块发地址、命令     占用总线
- 从模块准备数据    不占用总线
- 从模块向主模块发数据    占用总线