## 机器指令

### 指令的格式

- 操作码        反映机器做什么操作
  - 长度固定    用于指令字长较长的情况
  - 长度可变    操作码分散在指令字的不同字段中
- 地址码           
- 寻址方式

#### 扩展操作码技术

操作码的位数随地址数的减少而增加。

### 指令字长

指令字长决定于：

- 操作码的长度
- 操作数地址的长度
- 操作数地址的个数

#### 指令字长固定与可变

- 固定：指令字长=存储字长
- 可变：按字节的倍数变化

## 操作数类型和操作种类

### 操作数类型

#### 地址

无符号整数

#### 数字

定点数、浮点数、十进制数

#### 字符

ASCII

#### 逻辑数

逻辑运算

### 数据在存储器中的存放方式

- 从任意位置开始存储
  - 优点：不浪费存储资源
  - 缺点：处理访问一个字节之外，访问其它任何类型的都可能花费两个存储周期的时间。
- 从一个存储字的起始位置开始访问
  - 优点：无论访问何种类型的数据，在一个周期内均可完成，读写控制简单
  - 缺点：浪费了存储资源
- 边界对准方式——从地址的整数倍位置开始访问

### 操作类型

#### 数据传送

- 源       
- 目的

#### 算术逻辑操作

#### 移位操作

##### 算术移位

##### 逻辑移位

##### 循环移位

#### 转移

#### 陷阱

- 意外事故的中断
  - 在出现事故时，由CPU自动产生并执行
  - 设置供用户使用的陷阱指令

#### 输入输出

## 寻址方式

确定本条指令的操作数地址

- 指令寻址
- 数字寻址

### 指令寻址

- 顺序
- 跳跃   由转移指令指出

### 数字寻址

![1550303281584](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\1550303281584.png)

#### 立即寻址

形式地址A就是操作数

- 指令执行阶段不访存
- A的位数限制了范围

#### 直接寻址

有效地址由形式地址直接给出

- 执行阶段访问一次存储器
- A的位数决定了该指令操作数的寻址范围
- 操作数的地址不易修改

#### 隐含寻址

操作数地址隐含在操作码中

- 指令字中少了一个地址字段，可缩短指令字长

#### 相对寻址

A是相对于当前指令的位移量

- A的位数决定操作数的寻址范围
- 程序浮动
- 广泛用于转移指令

#### 间接寻址

有效地址由形式地址简介提供

- 执行指令阶段两个访存
- 可扩大寻址范围
- 便于编制程序

#### 寄存器寻址

·有效地址即为寄存器编号

- 寄存器个数有限，可缩短指令字长

#### 寄存器间接寻址

有效地址在寄存器中

- 便于编制循环程序

#### 基址寻址

采用专用寄存器作基址寄存器

- 可扩大寻址范围
- 有利于多道程序

采用通用寄存器作基址寄存器

#### 变址寻址

#### 堆栈寻址

- 特点
- 栈顶
  - 硬堆栈     多个寄存器
  - 软堆栈     指定的存储空间

### 举例

![1550303669040](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\1550303669040.png)

## 指令格式举例

### 设计指令格式要考虑的因素

- 指令系统的兼容性
- 其他因素
  - 操作类型   包括指令个数及操作的难易程度
  - 数据类型    确定哪些类型可参与操作
  - 指令格式    
  - 寻址方式
  - 寄存器个数

### 例子

#### IBM360

![1550305371650](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\1550305371650.png)

#### Intel 8086

![1550305424756](C:\Users\lenovo\AppData\Roaming\Typora\typora-user-images\1550305424756.png)

## RISC技术

### 产生和发展

RISC 精简指令集计算机

### 主要特征

- 选用使用频度较高的一些简单指令，复杂指令的功能由简单指令组合
- 指令长度固定、指令格式种类少、寻址方式少
- 只有LOAD/STORE指令访存
- CPU中有多个通用寄存器
- 采用流水技术，一个时钟周期内完成一条指令
- 采用组合逻辑实现控制器

