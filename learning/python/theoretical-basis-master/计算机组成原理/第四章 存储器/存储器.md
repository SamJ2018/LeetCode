### 存储器分类

#### 按存储介质分类

- 半导体存储器    TTL、MOS      		易失
- 磁表面存储器    磁头、载磁体      非易失       
- 磁芯存储器        硬磁材料、环状元件   非易失
- 光盘存储器        激光、磁光材料     非易失

#### 按存取方式分类

- 存取时间与物理地址无关（随机访问）
  - 随机存储器    在程序执行过程中可读可写
  - 只读存储器    在程序执行过程中只读
- 存取时间与物理地址有关（串行访问）
  - 顺序存取存储器    磁带
  - 直接存取存储器    磁盘

#### 按在计算机中的作用分类

- 主存储器
  - RAM    随机存储器
    - 静态RAM
    - 动态RAM
  - ROM    只读存储器
    - MROM    
    - PROM
    - EPROM
    - EEPROM
- Flash Memory   比如：U盘、还可以做为硬盘、SSD
- 高速缓冲存储器（Cache)
- 辅助存储器     磁盘、磁带、光盘

### 存储器的层次结构

### 存储器的三个主要特性的关系

- 速度
- 容量
- 价格/位



### 缓存——主存层次和主存——辅存层次



- 缓存——主存    速度
  - 主存储器    实地址   物理地址
- 主存——辅存    容量
  - 虚拟存储器    虚地址    逻辑地址



#### 程序的局部性原理

- 时间的局部性
- 空间的局部性

程序在执行时呈现出局部性规律，即在一段时间内，整个程序的执行仅限于程序中的某一部分。相应地，执行所访问地存储空间也局限于某个内存区域。

## 主存储器

### 概述

#### 主存的基本组成



#### 主存与CPU之间的联系



#### 主存中存储单元地址的分配

- 字地址=存储字地址=存储单元地址
- 存储字长32位=4字节
- 字地址只取其包含的4个字节地址的首地址

##### 两种存储

- 大端、大尾方式
- 小端、小尾方式

#### 主存的技术指标

##### 存储容量

主存中存放二进制代码的总位数。

##### 存储速度

- 存取时间      存储器的访问时间
  - 读出时间   写入时间
- 存取周期      连续两次独立的存储器操作所需的最小间隔时间
  - 读周期     写周期

##### 存储器的带宽

### 半导体芯片简介

#### 半导体存储芯片的基本结构



##### 线路介绍

- 地址线（单向）   x
- 数据线（双向）   y
- 芯片容量  = 2的x次方*y    位
- 片选线       
  - CS     芯片选择
  - CE     芯片的使能信号
- 读/写控制线      
  - WE  当芯片为低电平是写，高电平为读   一根线组成
  - OE    只允许读    WE   允许写    两根线组成

##### 存储芯片片选线的作用

- 用16K*1位的存储芯片组成64K*8位的存储器

#### 半导体存储芯片的译码驱动方式

- 线选法
- 重合法

### 随机存取存储器RAM

#### 静态RAM(SRAM)

##### 保存0和1的原理

- 利用双稳态触发器

##### 基本单元电路的构成

6管静态RAM



##### 对单元电路如何读出和写入

- 读操作



- 写操作



##### 典型芯片的结构

###### 举例

- Intel2114外特性



读写：



#### 动态RAM(DRAM)

##### 保存0和1的原理

- 利用电容  有电为1 没电为0

##### 基本单元电路的构成及写入和读出

- 三管动态RAM



- 单管动态RAM



##### 典型芯片的结构

###### 举例

- 三管动态RAM芯片（Intel 1103) 

  - 读

   

  - 写

    

- 单管动态RAM4116 

  - 外特性
    - 
  - 芯片基本操作
    - 读
      - 
        - 读放大器左侧的电容有电读出为0，电容没电读出为1，读放大器右侧电容相反
    - 写
      - 

##### 动态RAM的刷新

电容自己会漏电，如果长时间不对电容进行刷新数据会出错。

动态RAM刷新只与行地址有关。

###### 刷新方法

- 集中刷新
  - 优点：存取周期短
  - 缺点：有死区
- 分散刷新
  - 优点：无死区
  - 缺点：存取周期长
- 分散刷新与集中刷新相结合（异步刷新）
  - 优点：死区时间短，存取周期短

#### 动态RAM和静态RAM的比较

|          | DRAM |  SRAM  |
| :------: | :--: | :----: |
| 存储原理 | 电容 | 触发器 |
|  集成度  |  高  |   低   |
| 芯片引脚 |  少  |   多   |
|   功耗   |  小  |   大   |
|   价格   |  低  |   高   |
|   速度   |  慢  |   快   |
|   刷新   |  有  |   无   |

综上则，DRAM常用于主存，SRAM常用于缓存。

### 只读存储器ROM

- 早期的只读存储器——在厂家就写好了内容
- 改进1——用户可以自己写——一次性
- 改进2——可以多次写——要能对信息进行擦除
- 改进3——电可擦写——特定设备
- 改进4——电可擦写——任意设备

#### 掩模ROM(MROM)

行列选择线交叉处有MOS管为1，否则为0

#### PROM(一次性编程)



#### EPROM(多次性编程)



- 擦洗使用紫外线进行擦洗
- 价格便宜  集成度高

#### EEPROM

- 电可擦写
- 局部擦写
- 全部擦写

#### Falsh Memory(闪速型存储器)

- U盘

快，且具备一些ROM的功能。

### 存储器与CPU的连接

#### 存储器容量的扩展

##### 位扩展

###### 目的

增加存储字长

###### 举例



###### 一个问题及解答

- 2114数据线和地址线是否需要按序的与系统的数据线和地址线连接？

##### 字扩展

###### 目的

增加存储字的数量

###### 举例



##### 位、字同时扩展

###### 举例



#### 存储器与CPU的连接

##### 基本方法

###### 地址线的连接

###### 数据线的连接

###### 读/写命令线的连接

###### 片选线的连接

###### 合理选择存储芯片

###### 其他   时序、负载

##### 举例

### 存储器的校验

##### 编码的检测能力和纠错能力和什么有关

与合法代码集合中任意两组合法代码之间的二进制位的最少差异数有关。

###### 编码的最小距离

任意两组合法代码之间二进制位数的最少差异编码的纠错、检错能力与编码的最小距离有关。

##### 汉明码的组成

- 汉明码采用奇偶检验
- 汉明码采用分组校验
- 汉明码的分组是一种非划分方式

###### 三个要素

- 需要增添的检测位数
  - 2的k次方>=n+k+1
- 检测位的位置
  - 2的i次方
- 检测位的取值
  - 与该位所在小组情况以及其承担的奇偶校验任务有关

### 提高访存速度的措施

##### 采用高速器件

##### 采用层次结构  Cache-主存

##### 调整主存结构

- 单体多字系统
  - 优点：增加存储器的带宽
  - 缺点：需要硬件改良
- 多体并行系统
  - 高位交叉    顺序编址
    - 用于存储器容量的扩展
  - 低位交叉    各个个体轮流编址
    - 特点
      - 在不改变存取周期的前提下，增加存储器的带宽。

##### 高性能存储芯片

- SDRAM(同步DRAM)
  - CPU无须等待
- RDRAM
  - 主要解决存储器带宽问题
- 带Cache的DRAM

## 高速缓冲存储器

### 概述

#### 为什么要用Cache

避免CPU”空等“问题。

#### Cache的工作原理

##### 主存和缓存的编址





##### 命中与未命中

###### 命中

- 主存块调入缓存
- 主存块与缓存块建立了对应关系
- 用标记记录与某缓存块建立了对于关系的主存块号

###### 未命中

- 主存块未调入缓存
- 主存块与缓存块未建立对应关系

##### Cache的命中率

- CPU欲访问的信息在Cache中的比率
- 命中率与Cache的容量与块长有关
  - 块长取一个存取周期内从主存调出的信息长度

##### Cache-主存系统的效率

- 效率与命中率有关

#### Cache的基本结构



#### Cache的读写操作

- 读
  - 
- 写   要解决Cache和主存的一致性
  - 写直达法
    - 优点：数据一致
    - 缺点：对一个内容重复写
  - 写回法
    - 缺点：某段时间内容不一致

#### Cache的改进

- 增加Cache的级数
- 统一缓存和分立缓存

#### Cache-主存的地址映射

- 直接映射
- 全相联映射
- 组相联映射

#### 替换算法

- 先进先出算法
- 近期最少使用算法

## 辅助存储器（再看一看

### 概述

#### 特点

不直接与CPU交换信息

#### 磁表面存储器的技术指标

- 记录密度   道密度  位密度
- 存储容量
- 平均寻址时间   寻道时间+等待时间
  - 辅存的速度
    - 寻址时间
    - 磁头读写时间
- 数据传输率
- 误码率

### 磁记录原理

- 写

  - 

- 读

  



### 硬磁盘存储器（再看一遍

#### 类型

- 固定磁头和移动磁头
- 可换盘和固定盘

#### 结构

