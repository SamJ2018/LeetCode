# 存储引擎的选择

> 需求不同选择不同的存储引擎，存储引擎是MySQL的一大特点

## 存储引擎概述

> MySQL5.5之前的默认存储引擎为MyISAM,之后改为了InnoDB

### 关于存储引擎的一些常用操作

- 查询当前数据库支持的存储引擎

  > `show engines \G`
  >
  > 或`select variables like 'have%';`

- 存储引擎的设置

  - 在建表时通过`engine`设置

  > `create table my(i int not null auto_increment,primary key(i)) engine=MyISAM default charset=gbk;`

  - 修改表的存储引擎

  > `alter table my engine=innodb;`

## 各个存储引擎的特性

> 介绍了4种常用的存储引擎

### MyISAM

- 不支持事务、不支持外键
- 优点
  - 访问速度快
- 磁盘上存储
  - .frm 存储表定义
  - .MYD 存储数据
  - .MYI 储存索引

##### 存储格式

- 静态表（默认
  - 优点
    - 存储迅速、容易缓存、出现故障容易恢复
  - 缺点
    - 占用空间较多
  - 注意
    - 会造成丢失数据尾部的空格
- 动态表
  - 优点
    - 占用空间较少
  - 缺点
    - 要定期执行`optimize table `或`myisamchk -r`来改善性能，清除碎片
    - 出现故障恢复困难
- 压缩表

#### 适合场景

> 应用以读操作和插入操作为主，只是很多的更新和删除操作，且对事务的完整性、并发性要求不高

### InnoDB

- 具有事务安全

#### 特点

##### 自动增长列

- 其自动增长列必须是索引，如果是组合索引，必须是组合索引的第一列

##### 外键约束

- 只有InnoDB支持外键
- 对子表进行操作创建索引时有多个选项
  - 级联
  - 置NULL
  - 无行动

##### 存储方式

- 使用共享表空间存储
- 使用多表空间存储

#### 适合场景

> 用于事务处理应用程序，支持外键

### MEMORY

- 使用存在于内存的内容创建表，访问快，但一旦服务关闭，表中的数据会丢失。

#### 适合场景

> 将所有数据保存在RAM中，在需要快速定位记录和其它类似数据的环境下，可提供极快的访问。

### MERGE

- 是一组MyISAM表的集合

> 用于把一系列等同的MyISAM表以逻辑方式组合在一起，并作为一个对象引用他们